
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NFL Elo Ratings & Betting Tools</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>NFL Elo Power Toolkit</h1>
    <p class="tagline">Model ratings, evaluate sportsbook edges, and compare custom wagers in one place.</p>
  </header>

  <nav class="tab-nav">
    <button class="tab-button active" data-tab="elo">Elo Model Ratings</button>
    <button class="tab-button" data-tab="ev">EV Calculator</button>
    <button class="tab-button" data-tab="custom">Custom Bet Comparison</button>
  </nav>

  <main>
    <section id="tab-elo" class="tab-section active">
      <section class="panel">
        <h2>Data Inputs</h2>
        <p class="hint">Upload historical games, upcoming schedule, and optional market lines or auto-fetch nflverse data.</p>
        <div class="input-grid">
          <label class="file-input">
            <span class="input-title">Completed Games</span>
            <input type="file" id="gamesFile" accept=".csv" />
            <span class="input-desc">Finished games with scores.</span>
          </label>
          <label class="file-input">
            <span class="input-title">Upcoming Schedule</span>
            <input type="file" id="upcomingFile" accept=".csv" />
            <span class="input-desc">Fixtures to project (season/week required).</span>
          </label>
          <label class="file-input">
            <span class="input-title">Market Lines (Optional)</span>
            <input type="file" id="marketFile" accept=".csv" />
            <span class="input-desc">Spread or moneyline odds for edge calculations.</span>
          </label>
        </div>

        <div class="auto-fetch">
          <h3>Auto-Fetch from nflverse</h3>
          <div class="auto-controls">
            <label for="seasonInput">Seasons (comma/range):</label>
            <input id="seasonInput" type="text" value="2010-2025" autocomplete="off" />
            <button id="autoFetchBtn" type="button">Fetch Latest Data</button>
          </div>
          <p id="autoStatus" class="hint">Awaiting auto fetch (optional).</p>
        </div>
      </section>

      <section class="panel">
        <h2>Run Elo Model</h2>
        <p class="hint">Defaults: base rating 1500, K=20, regression 25%, home field +55 Elo, 25 Elo per point spread.</p>
        <button id="runBtn">Run Model</button>
      </section>

      <section id="eloOutputs" class="panel outputs">
        <p>Waiting for inputâ€¦</p>
      </section>
    </section>

    <section id="tab-ev" class="tab-section">
      <section class="panel">
        <h2>EV Calculator</h2>
        <p class="hint">Enter your The Odds API key to pull current sportsbook prices (US region, moneyline markets).</p>
        <div class="api-controls">
          <input id="apiKeyInput" type="text" placeholder="The Odds API key" autocomplete="off" />
          <button id="loadOddsBtn" type="button">Load Sportsbook Lines</button>
        </div>
        <p id="apiStatus" class="hint"></p>
      </section>
      <section class="panel" id="evContent">
        <p class="hint">Run the Elo model and load sportsbook lines to view expected value by game.</p>
      </section>
    </section>

    <section id="tab-custom" class="tab-section">
      <section class="panel">
        <h2>Custom Bet Evaluator</h2>
        <p class="hint">Compare your offered odds to both the model and market consensus.</p>
        <form id="customBetForm" class="custom-form">
          <label>
            Game
            <select id="customGameSelect"></select>
          </label>
          <label>
            Bet Type
            <select id="customBetType">
              <option value="home_ml">Home Moneyline</option>
              <option value="away_ml">Away Moneyline</option>
            </select>
          </label>
          <label>
            Your Odds
            <input type="number" id="customOddsInput" placeholder="-110" step="1" required />
          </label>
          <button type="submit">Add Bet</button>
        </form>
      </section>
      <section class="panel" id="customResults">
        <p class="hint">No custom bets yet. Run the model and add your first wager above.</p>
      </section>
    </section>
  </main>

  <footer>
    <p>All calculations run locally in your browser. Data sourced from nflverse and The Odds API.</p>
  </footer>

  <script src="papaparse.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
